<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuveto - Arquitetura Técnica Stack V4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- FontAwesome for specific Brand Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Container Stage */
        .stage {
            width: 1280px;
            height: 720px;
            position: relative;
            background-color: #f8fafc;
            overflow: hidden;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* Transitions */
        .layer-box {
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .fade-content {
            transition: opacity 0.4s ease-in-out;
        }

        .actor-transition {
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Data Flow Animations */
        .flow-path {
            fill: none;
            stroke: #94a3b8; /* Slate-400 inactive */
            stroke-width: 2;
            stroke-dasharray: 10;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .flow-active {
            stroke: #2563eb; /* Blue-600 */
            stroke-width: 3;
            opacity: 1;
            animation: dash-flow 1.5s linear infinite;
        }

        .particle {
            fill: #3b82f6;
            filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.8));
            opacity: 0;
        }

        @keyframes dash-flow {
            to { stroke-dashoffset: -20; }
        }

        .particle-visible {
            opacity: 1;
        }

        /* Slide 3 Grid Layout */
        .grid-details {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1.2fr; /* Adjusted for content width */
            gap: 0.75rem;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.5s ease-out;
            height: 100%;
            align-content: center;
            padding-top: 2rem;
        }
        
        /* CORREÇÃO AQUI: Seletor ajustado para aplicar quando a classe estiver no mesmo elemento */
        .grid-details.show-details {
            opacity: 1;
            transform: translateY(0);
        }

        .hide-basic {
            opacity: 0;
            pointer-events: none;
        }

        /* Group Box Styling for Slide 3 */
        .group-box {
            background: rgba(30, 58, 138, 0.3);
            border: 1px solid rgba(147, 197, 253, 0.3);
            border-radius: 8px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            height: 100%;
        }
        .group-title {
            font-size: 10px;
            text-transform: uppercase;
            color: #93c5fd; /* blue-300 */
            font-weight: 800;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 4px;
            margin-bottom: 2px;
        }
        .feature-item {
            font-size: 11px;
            color: white;
            display: flex;
            align-items: center;
            gap: 6px;
            line-height: 1.2;
        }
    </style>
</head>
<body class="bg-slate-300 h-screen flex items-center justify-center p-4">

    <div class="stage flex flex-col bg-slate-50">
        
        <!-- Header -->
        <header class="bg-white px-8 py-4 flex justify-between items-center border-b border-slate-200 h-20 z-50">
            <div class="flex items-center gap-3">
                <div class="bg-blue-600 text-white p-2 rounded-lg">
                    <i data-lucide="layers" class="w-6 h-6"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-slate-800">Arquitetura <span class="text-blue-600">Conecta+</span></h1>
                    <p class="text-xs text-slate-500 font-medium uppercase tracking-wider">Integração & Preservação</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <span id="slide-indicator" class="text-sm font-bold text-slate-700 bg-slate-100 px-3 py-1 rounded-full border border-slate-200">Fase 1: Legado</span>
            </div>
        </header>

        <!-- Visualization Area -->
        <div class="flex-1 relative bg-slate-100 overflow-hidden">
            
            <!-- SVG Layer -->
            <!-- Canvas is 1280x640 (approx header removed) -->
            <svg class="absolute inset-0 w-full h-full z-0 pointer-events-none" id="flow-svg">
                
                <!-- Path 1: Legacy Direct (Slide 1) -->
                <!-- Start Left -> Into Legacy -> Out Right -->
                <!-- Y coordinates based on Legacy box centered initially at bottom -->
                <path id="path-legacy" class="flow-path flow-active" d="M 120 450 L 240 450 L 240 450 L 1040 450 L 1040 450 L 1160 450" />
                <circle id="particle-legacy" r="6" class="particle particle-visible">
                    <animateMotion dur="3s" repeatCount="indefinite" path="M 120 450 L 240 450 L 240 450 L 1040 450 L 1040 450 L 1160 450" />
                </circle>

                <!-- Path 2: Conecta Integration (Slide 2 & 3) -->
                <!-- Enter Left (Conecta) -> Center (AI Agent) -> Down (Legacy) -> Out Right (Legacy) -->
                <!-- 
                    Conecta Box Y: ~180
                    Legacy Box Y: ~480
                    Center X: 640
                -->
                <path id="path-conecta" class="flow-path" 
                      d="M 120 200 L 240 200 L 640 200 L 640 450 L 1040 450 L 1160 450" />
                
                <circle id="particle-conecta" r="6" class="particle opacity-0">
                    <animateMotion dur="4s" repeatCount="indefinite" 
                                   path="M 120 200 L 240 200 L 640 200 L 640 450 L 1040 450 L 1160 450" />
                </circle>

                <!-- Vertical Dashed Line Visual -->
                <line id="wire-down" x1="640" y1="290" x2="640" y2="400" stroke="#94a3b8" stroke-width="3" stroke-dasharray="6,6" class="opacity-0 transition-opacity duration-1000" />
            </svg>

            <!-- Actors -->
            <!-- Customer (Left) -->
            <div id="actor-customer" class="actor-transition absolute left-8 top-[450px] -translate-y-1/2 flex flex-col items-center gap-2 z-20">
                <div class="w-20 h-20 bg-white rounded-full shadow-lg border-4 border-slate-200 flex items-center justify-center relative">
                    <i data-lucide="user" class="w-10 h-10 text-slate-600"></i>
                </div>
                <span class="font-bold text-slate-600 bg-white/80 px-2 rounded text-sm shadow-sm">Cliente</span>
            </div>

            <!-- Agent (Right) -->
            <div id="actor-agent" class="actor-transition absolute right-8 top-[450px] -translate-y-1/2 flex flex-col items-center gap-2 z-20">
                <div class="w-20 h-20 bg-white rounded-full shadow-lg border-4 border-slate-200 flex items-center justify-center">
                    <i data-lucide="headset" class="w-10 h-10 text-slate-600"></i>
                </div>
                <span class="font-bold text-slate-600 bg-white/80 px-2 rounded text-sm shadow-sm">Agente</span>
            </div>


            <!-- THE STACK CONTAINER -->
            <!-- Centered horizontally -->
            <div class="absolute left-1/2 -translate-x-1/2 top-0 w-[800px] h-full pointer-events-none">

                <!-- LAYER 2: CONECTA+ (Top Layer) -->
                <!-- Positioned at top: ~120px -->
                <div id="layer-conecta" class="layer-box absolute top-[120px] w-full bg-gradient-to-r from-blue-700 to-indigo-900 rounded-xl shadow-2xl text-white transform -translate-y-[200%] opacity-0 z-30 h-[160px] border-2 border-blue-400 pointer-events-auto overflow-hidden">
                    
                    <!-- Header -->
                    <div class="absolute top-0 left-0 w-full h-7 bg-black/20 flex items-center justify-between px-3 border-b border-white/10">
                        <span class="text-[9px] font-bold uppercase tracking-widest text-blue-200">Camada Conecta+ (Inteligência)</span>
                        <div class="flex gap-1">
                            <div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>
                            <div class="w-1.5 h-1.5 rounded-full bg-yellow-400"></div>
                        </div>
                    </div>

                    <!-- CONTENT: SLIDE 2 (Basic View) -->
                    <div id="conecta-basic" class="fade-content absolute top-7 left-0 w-full h-[calc(100%-1.75rem)] flex items-center px-4">
                        
                        <!-- Left: Input Channels -->
                        <div class="w-1/3 flex flex-col gap-2 border-r border-blue-500/30 pr-3">
                            <!-- Voz Group -->
                            <div class="bg-blue-800/40 p-1.5 rounded border border-blue-500/50">
                                <div class="text-[8px] uppercase text-blue-300 font-bold mb-1">Voz Contextual</div>
                                <div class="flex gap-2">
                                    <div class="flex items-center gap-1 bg-white/10 px-1.5 py-0.5 rounded text-[9px]"><i data-lucide="smartphone" class="w-3 h-3"></i> App</div>
                                    <div class="flex items-center gap-1 bg-white/10 px-1.5 py-0.5 rounded text-[9px]"><i data-lucide="globe" class="w-3 h-3"></i> Web</div>
                                    <div class="flex items-center gap-1 bg-green-500/20 px-1.5 py-0.5 rounded text-[9px] text-green-200"><i class="fa-brands fa-whatsapp"></i> Call</div>
                                </div>
                            </div>
                            <!-- Digital Group -->
                            <div class="bg-purple-900/30 p-1.5 rounded border border-purple-500/30">
                                <div class="text-[8px] uppercase text-purple-300 font-bold mb-1">Canais Digitais</div>
                                <div class="flex flex-wrap gap-2 text-white text-xs">
                                    <i class="fa-brands fa-whatsapp text-green-400"></i>
                                    <i class="fa-brands fa-instagram text-pink-400"></i>
                                    <i class="fa-brands fa-facebook-messenger text-blue-400"></i>
                                    <i class="fa-brands fa-linkedin text-blue-600"></i>
                                    <i class="fa-brands fa-telegram text-sky-400"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Center: AI Agent (Replaces Smart Router) -->
                        <div class="flex-1 flex flex-col items-center justify-center relative">
                            <!-- The vertical wire visual passing through -->
                            <div class="absolute top-0 bottom-0 w-0.5 bg-blue-400/30 dashed"></div>
                            
                            <div class="bg-indigo-600 p-3 rounded-xl border-2 border-indigo-400 shadow-[0_0_15px_rgba(99,102,241,0.5)] flex flex-col items-center gap-1 relative z-10 animate-pulse">
                                <div class="bg-white p-1.5 rounded-full"><i data-lucide="bot" class="w-6 h-6 text-indigo-600"></i></div>
                                <span class="text-[10px] font-bold">Agente de IA</span>
                            </div>
                        </div>

                        <!-- Right: Output Placeholder -->
                        <div class="w-1/3 text-center text-blue-300 text-[10px] opacity-50">
                            Integração SIP/API
                        </div>
                    </div>

                    <!-- CONTENT: SLIDE 3 (Detailed View) -->
                    <div id="conecta-details" class="grid-details absolute inset-0 p-4 pt-8 hidden">
                        
                        <!-- 1. Telecom -->
                        <div class="flex flex-col justify-center items-center bg-white/10 rounded-lg border border-white/20">
                            <i data-lucide="cloud" class="w-8 h-8 text-blue-300 mb-1"></i>
                            <div class="text-[10px] font-bold text-center leading-tight">Telecom<br>Nuveto</div>
                        </div>

                        <!-- 2. Context Server -->
                        <div class="flex flex-col justify-center items-center bg-white/10 rounded-lg border border-white/20">
                            <i data-lucide="database" class="w-8 h-8 text-yellow-300 mb-1"></i>
                            <div class="text-[10px] font-bold text-center leading-tight">Context<br>Server</div>
                        </div>

                        <!-- 3. Outbound Group -->
                        <div class="group-box">
                            <div class="group-title">Outbound</div>
                            <div class="feature-item"><i data-lucide="zap" class="w-3 h-3 text-yellow-400"></i> Smart Connect</div>
                            <div class="feature-item"><i data-lucide="voicemail" class="w-3 h-3 text-red-400"></i> AMD</div>
                            <div class="feature-item"><i data-lucide="sliders" class="w-3 h-3 text-gray-300"></i> Avançados</div>
                            <div class="feature-item"><i data-lucide="bot" class="w-3 h-3 text-blue-300"></i> Cobrança por IA</div>
                        </div>

                        <!-- 4. Inbound Group -->
                        <div class="group-box">
                            <div class="group-title">Inbound</div>
                            <div class="feature-item"><i data-lucide="phone-incoming" class="w-3 h-3 text-green-400"></i> 0800 / NUN</div>
                            <div class="feature-item"><i data-lucide="file-json" class="w-3 h-3 text-blue-300"></i> Dados Contexto</div>
                            <div class="feature-item"><i data-lucide="lock" class="w-3 h-3 text-orange-400"></i> Criptografia</div>
                            <div class="feature-item"><i data-lucide="bot" class="w-3 h-3 text-orange-300"></i> SDR Virtual</div>
                        </div>

                        <!-- 5. Digital Channels Group -->
                        <div class="group-box">
                            <div class="group-title">Canais Digitais</div>
                            <div class="feature-item"><i data-lucide="git-merge" class="w-3 h-3"></i> Orquestração</div>
                            <div class="feature-item"><i data-lucide="video" class="w-3 h-3"></i> Vídeo</div>
                            <div class="feature-item"><i data-lucide="languages" class="w-3 h-3"></i> Tradução</div>
                            <div class="feature-item"><i data-lucide="scan-face" class="w-3 h-3"></i> Análise IMG</div>
                        </div>

                    </div>

                </div>

                <!-- LAYER 1: LEGACY (Base Layer) -->
                <!-- Positioned at bottom: ~400px -->
                <div id="layer-legacy" class="layer-box absolute top-[400px] w-full h-[200px] bg-slate-200 rounded-xl shadow-inner border-2 border-slate-300 p-6 z-20 pointer-events-auto">
                    <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-slate-300 text-slate-700 px-4 py-1 rounded-full text-xs font-bold shadow-sm z-10 border border-slate-400">
                        Infraestrutura Legada (Preservada)
                    </div>

                    <!-- Icons darkened and container height ensured -->
                    <div class="grid grid-cols-4 gap-4 mt-6 h-full items-start opacity-100">
                        <div class="flex flex-col items-center gap-2 p-3 bg-white rounded-lg shadow-sm border border-slate-300 h-24 justify-center">
                            <i data-lucide="server" class="w-8 h-8 text-slate-600"></i>
                            <span class="text-xs font-bold text-slate-700">PABX SIP</span>
                        </div>
                        <div class="flex flex-col items-center gap-2 p-3 bg-white rounded-lg shadow-sm border border-slate-300 h-24 justify-center">
                            <i data-lucide="mic" class="w-8 h-8 text-slate-600"></i>
                            <span class="text-xs font-bold text-slate-700">Gravador</span>
                        </div>
                        <div class="flex flex-col items-center gap-2 p-3 bg-white rounded-lg shadow-sm border border-slate-300 h-24 justify-center">
                            <i data-lucide="layout-grid" class="w-8 h-8 text-slate-600"></i>
                            <span class="text-xs font-bold text-slate-700">URA / IVR</span>
                        </div>
                        <div class="flex flex-col items-center gap-2 p-3 bg-white rounded-lg shadow-sm border border-slate-300 h-24 justify-center">
                            <i data-lucide="database" class="w-8 h-8 text-slate-600"></i>
                            <span class="text-xs font-bold text-slate-700">CRM</span>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <!-- Footer -->
        <footer class="bg-white border-t border-slate-200 p-4 flex justify-between items-center z-50 rounded-b-xl">
            <div class="text-xs text-slate-400 w-1/3">Confidencial Nuveto</div>
            <div class="flex gap-4 w-1/3 justify-center">
                <button onclick="setSlide(0)" class="w-3 h-3 rounded-full bg-blue-600 transition-all hover:scale-125" id="dot-0"></button>
                <button onclick="setSlide(1)" class="w-3 h-3 rounded-full bg-slate-300 transition-all hover:scale-125" id="dot-1"></button>
                <button onclick="setSlide(2)" class="w-3 h-3 rounded-full bg-slate-300 transition-all hover:scale-125" id="dot-2"></button>
            </div>
            <div class="w-1/3 flex justify-end">
                <button onclick="nextSlide()" id="btn-next" class="bg-slate-900 text-white px-6 py-2 rounded-lg font-bold hover:bg-slate-800 transition flex items-center gap-2 shadow-lg">
                    Avançar <i data-lucide="chevron-right" class="w-4 h-4"></i>
                </button>
            </div>
        </footer>

    </div>

    <script>
        let currentStep = 0;

        // Elements
        const layerConecta = document.getElementById('layer-conecta');
        const layerLegacy = document.getElementById('layer-legacy');
        
        const pathLegacy = document.getElementById('path-legacy');
        const particleLegacy = document.getElementById('particle-legacy');
        
        const pathConecta = document.getElementById('path-conecta');
        const particleConecta = document.getElementById('particle-conecta');
        
        const customerActor = document.getElementById('actor-customer');
        const agentActor = document.getElementById('actor-agent');
        
        const slideIndicator = document.getElementById('slide-indicator');
        const wireDown = document.getElementById('wire-down');

        const conectaBasic = document.getElementById('conecta-basic');
        const conectaDetails = document.getElementById('conecta-details');
        const nextButton = document.getElementById('btn-next');

        function updateVisuals() {
            // Update Dots
            [0,1,2].forEach(i => {
                document.getElementById(`dot-${i}`).className = `w-3 h-3 rounded-full transition-all hover:scale-125 ${i === currentStep ? 'bg-blue-600 scale-125' : 'bg-slate-300'}`;
            });

            if (currentStep === 0) {
                // SLIDE 1: LEGACY ONLY
                slideIndicator.innerText = "Fase 1: Fluxo Legado (Atual)";
                
                // 1. Hide Conecta Layer
                layerConecta.classList.add('opacity-0', '-translate-y-[200%]');
                layerConecta.classList.remove('h-[250px]'); 
                
                // 2. Position Actors (Legacy Level)
                // Legacy box is at top: 400px, height: 200px. Center is approx 500px.
                customerActor.style.top = "500px";
                agentActor.style.top = "500px";
                
                // 3. Flow Paths
                pathLegacy.classList.add('flow-active');
                pathLegacy.style.opacity = "1";
                particleLegacy.classList.add('particle-visible');
                
                pathConecta.classList.remove('flow-active');
                pathConecta.style.opacity = "0";
                particleConecta.classList.remove('particle-visible');

                // 4. Wires/Decorations
                wireDown.style.opacity = "0";
                
                // 5. Content Reset
                conectaBasic.classList.remove('hide-basic');
                conectaDetails.classList.add('hidden');
                conectaDetails.classList.remove('show-details');
                
                nextButton.innerHTML = 'Avançar <i data-lucide="chevron-right" class="w-4 h-4"></i>';

            } else if (currentStep === 1) {
                // SLIDE 2: STACKING CONECTA+ & NEW FLOW
                slideIndicator.innerText = "Fase 2: Integração Conecta+ (Empilhamento)";
                
                // 1. Drop Conecta Layer
                layerConecta.classList.remove('opacity-0', '-translate-y-[200%]', 'h-[250px]');
                
                // 2. Reposition Customer (Up to Conecta)
                // Conecta box is at top: 120px, height 160px. Center is approx 200px.
                customerActor.style.top = "200px";
                
                // 3. Keep Agent at Legacy Output (Down)
                agentActor.style.top = "500px";
                
                // 4. Flow Paths - Switch flow
                pathLegacy.classList.remove('flow-active'); 
                pathLegacy.style.opacity = "0.1"; 
                particleLegacy.classList.remove('particle-visible');

                setTimeout(() => {
                    pathConecta.classList.add('flow-active');
                    pathConecta.style.opacity = "1";
                    particleConecta.classList.add('particle-visible');
                    wireDown.style.opacity = "1";
                }, 500); 

                // 5. Content
                conectaBasic.classList.remove('hide-basic');
                conectaDetails.classList.add('hidden');
                conectaDetails.classList.remove('show-details');
                
                nextButton.innerHTML = 'Avançar <i data-lucide="chevron-right" class="w-4 h-4"></i>';

            } else if (currentStep === 2) {
                // SLIDE 3: COMPONENTES (EXPANDED)
                slideIndicator.innerText = "Componentes Conecta+";

                // 1. Expand Box Height
                layerConecta.classList.add('h-[250px]'); 
                
                // 2. Maintain positions
                customerActor.style.top = "200px";
                agentActor.style.top = "500px";
                
                // 3. Switch Content inside Box
                conectaBasic.classList.add('hide-basic');
                conectaDetails.classList.remove('hidden');
                
                setTimeout(() => {
                    conectaDetails.classList.add('show-details');
                }, 300);

                nextButton.innerHTML = 'Reiniciar <i data-lucide="rotate-ccw" class="w-4 h-4"></i>';
            }
        }

        function nextSlide() {
            if (currentStep < 2) {
                currentStep++;
                updateVisuals();
            } else {
                currentStep = 0; // Loop back
                updateVisuals();
            }
        }

        function setSlide(index) {
            currentStep = index;
            updateVisuals();
        }

        // Init
        lucide.createIcons();
        updateVisuals();

    </script>
</body>
</html>

